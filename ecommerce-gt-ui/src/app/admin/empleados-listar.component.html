<!-- src/app/admin/empleados-listar.component.html -->
<div class="container py-4">

  <!-- Barra superior con contador y filtros -->
  <div class="card shadow-sm border-0 rounded-3 mb-3">
    <div class="card-header bg-primary text-white d-flex align-items-center justify-content-between">
      <h5 class="mb-0"><i class="bi bi-people me-2"></i>Gestión de Usuarios</h5>
      <div>
        <span class="badge bg-light text-dark me-3">
          Total: <strong>{{ total }}</strong>
        </span>
        <a class="btn btn-light btn-sm fw-semibold" [routerLink]="['/admin/empleados/crear']">
          <i class="bi bi-plus-circle me-1"></i> Nuevo Empleado
        </a>
      </div>
    </div>

    <div class="card-body py-3">
      <form class="row g-2 align-items-end">
        <div class="col-12 col-md-4">
          <label class="form-label">Buscar por nombre</label>
          <input   class="form-control"
            type="text"
            placeholder="Ej. Marco, Karen…"
            [(ngModel)]="nombre"
            name="nombre"
            (ngModelChange)="onNombreChange($event)"  >
          </div>
        <div class="col-12 col-md-3">
          <label class="form-label">Rol</label>
        <select
          class="form-select"
          [(ngModel)]="rol"
          name="rol"
          (change)="onRolChange()"                  
        >
          <option value="TODOS">Todos</option>
          <option value="ADMIN">Admin</option>
          <option value="MODERADOR">Moderador</option>
          <option value="LOGISTICA">Logística</option>
          <option value="COMUN">Común</option>
        </select>
        </div>
        <div class="col-12 col-md-5 d-flex gap-2">
          <button type="button" class="btn btn-outline-secondary" (click)="limpiar()">
            <i class="bi bi-eraser me-1"></i> Limpiar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Tabla -->
  <div class="card-body p-3">
    <div class="table-responsive">
        <table class="table table-hover align-middle">
        <thead class="table-secondary">
          <tr>
            <th>ID</th><th>Nombre</th><th>Correo</th><th>Teléfono</th><th>Rol</th><th>Estado</th><th>Acción</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let e of empleados">
            <td>{{ e.id }}</td>
            <td>{{ e.nombre }}</td>
            <td>{{ e.correo }}</td>
            <td>{{ e.telefono }}</td>
            <td><span class="badge bg-dark">{{ e.rol }}</span></td>
            <td>
              <span class="badge" [ngClass]="e.activo ? 'bg-success' : 'bg-danger'">
                {{ e.activo ? 'Activo' : 'Inactivo' }}
              </span>
            </td>
            <td>
              <button class="btn btn-outline-secondary btn-sm" disabled>
                <i class="bi bi-pencil"></i>
              </button>
            </td>
          </tr>
          <tr *ngIf="empleados.length === 0">
            <td colspan="7" class="text-center text-muted py-4">Sin registros</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="card-footer d-flex justify-content-between align-items-center">
      <span class="text-muted small">Página {{ pagina + 1 }} / {{ totalPaginas }}</span>
      <div class="d-flex gap-2">
        <button class="btn btn-outline-secondary btn-sm" (click)="prev()" [disabled]="pagina===0">
          <i class="bi bi-chevron-left"></i>
        </button>
        <button class="btn btn-outline-secondary btn-sm" (click)="next()" [disabled]="pagina+1>=totalPaginas">
          <i class="bi bi-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>
</div>
